name: GLaDOS Auto Checkin

on:
  workflow_dispatch:  # æ‰‹åŠ¨è§¦å‘
  push:
    branches: [ main ]
  schedule:
    - cron: '10 2 * * *'  # æ¯å¤© UTC 02:10ï¼ˆåŒ—äº¬æ—¶é—´ 10:10ï¼‰

jobs:
  checkin:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18
          
      - name: Create script file
        run: |
          cat > glados.js << 'EOF'
          // è¿™é‡Œç²˜è´´æ‚¨çš„å®Œæ•´ JavaScript ä»£ç 
          // ä½¿ç”¨æˆ‘ä¸Šé¢æä¾›çš„å¸¦è¯¦ç»†æ—¥å¿—çš„ç‰ˆæœ¬
          
          const glados = async () => {
            console.log('ğŸš€ GLaDOS ç­¾åˆ°è„šæœ¬å¼€å§‹æ‰§è¡Œ')
            // ... å®Œæ•´ä»£ç  ...
          }
          
          // ... å…¶ä»–å‡½æ•° ...
          
          main()
          EOF
          
          echo "âœ… è„šæœ¬æ–‡ä»¶åˆ›å»ºå®Œæˆ"
          echo "ğŸ“„ æ–‡ä»¶å†…å®¹é¢„è§ˆï¼š"
          head -20 glados.js
      
      - name: Run checkin script
        run: node glados.js
        env:
          GLADOS: ${{ secrets.GLADOS }}
          NOTIFY: ${{ secrets.NOTIFY }}
